"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[549],{7549:function(e,l,t){t.r(l),t.d(l,{default:function(){return D}});var n=t(6768),a=t(5130),i=t(4232);const s={class:"container mt-5"},r={class:"card"},o={class:"card-body"},c={key:0},d={key:1,class:"mt-4"},p={class:"mt-4"},u=["disabled"],k={class:"d-flex justify-content-between mt-4"};function h(e,l,t,h,v,g){return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",r,[l[13]||(l[13]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Step 5: Project Documents")],-1)),(0,n.Lk)("div",o,[(0,n.Lk)("div",{class:"upload-area p-5 text-center",onDragover:l[3]||(l[3]=(0,a.D$)((...e)=>g.onDragOver&&g.onDragOver(...e),["prevent"])),onDragleave:l[4]||(l[4]=(0,a.D$)((...e)=>g.onDragLeave&&g.onDragLeave(...e),["prevent"])),onDrop:l[5]||(l[5]=(0,a.D$)((...e)=>g.onDrop&&g.onDrop(...e),["prevent"]))},[(0,n.Lk)("input",{type:"file",ref:"fileInput",onChange:l[0]||(l[0]=(...e)=>g.handleFileSelect&&g.handleFileSelect(...e)),class:"d-none"},null,544),v.selectedFile?((0,n.uX)(),(0,n.CE)("div",d,[l[11]||(l[11]=(0,n.Lk)("h5",null,"Selected File:",-1)),(0,n.Lk)("p",null,(0,i.v_)(v.selectedFile.name)+" ("+(0,i.v_)(g.formatFileSize(v.selectedFile.size))+")",1),(0,n.Lk)("button",{onClick:l[2]||(l[2]=(...e)=>g.clearSelection&&g.clearSelection(...e)),class:"btn btn-link"},"Clear Selection")])):((0,n.uX)(),(0,n.CE)("div",c,[l[10]||(l[10]=(0,n.Lk)("p",{class:"lead mb-3"},"Drag a file here or choose manually.",-1)),(0,n.Lk)("button",{onClick:l[1]||(l[1]=(...e)=>g.openFileDialog&&g.openFileDialog(...e)),class:"btn btn-primary px-4"},l[9]||(l[9]=[(0,n.Lk)("i",{class:"bi bi-folder2-open me-2"},null,-1),(0,n.eW)("Choose File ")]))]))],32),(0,n.Lk)("div",p,[(0,n.Lk)("button",{onClick:l[6]||(l[6]=(...e)=>g.uploadFile&&g.uploadFile(...e)),class:"btn btn-success w-100",disabled:!v.selectedFile},l[12]||(l[12]=[(0,n.Lk)("i",{class:"bi bi-upload me-2"},null,-1),(0,n.eW)("Upload File ")]),8,u)]),(0,n.Lk)("div",k,[(0,n.Lk)("button",{class:"btn btn-secondary px-4",onClick:l[7]||(l[7]=(...e)=>g.prevStep&&g.prevStep(...e))}," Back "),(0,n.Lk)("button",{class:"btn btn-primary px-4",onClick:l[8]||(l[8]=(...l)=>e.nextStep&&e.nextStep(...l))}," Finish ")])])])])}t(4114);var v={data(){return{selectedFile:null,isDragging:!1}},methods:{openFileDialog(){this.$refs.fileInput.click()},clearSelection(){this.selectedFile=null},handleFileSelect(){this.selectedFile=event.target.files[0]},onDragOver(){this.isDragging=!0},onDragLeave(){this.isDragging=!1},onDrop(e){this.isDragging=!1;const l=e.dataTransfer.files[0];l&&(this.selectedFile=l)},formatFileSize(e){const l=["байт","КБ","МБ"];let t=0;while(e>=1024&&t<l.length-1)e/=1024,t++;return`${Math.round(100*e)/100} ${l[t]}`},prevStep(){this.$router.push("/executers")},async uploadFile(){if(!this.selectedFile)return void alert("Файл не выбран");const e=new FormData;e.append("projectDocument",this.selectedFile);try{const l=await fetch("/api/upload",{method:"POST",body:e});l.ok?alert("Документ успешно загружен!"):alert("Ошибка при загрузке файла")}catch(l){alert("Что-то пошло не так: "+l.message)}}}},g=t(1241);const b=(0,g.A)(v,[["render",h]]);var D=b}}]);
//# sourceMappingURL=549.773df8e7.js.map